
import { createContext, useContext, useState, useEffect, type ReactNode } from "react"

type Locale = "en" | "zh"

interface I18nContextType {
  locale: Locale
  setLocale: (locale: Locale) => void
  t: (key: string) => string
}

const I18nContext = createContext<I18nContextType | undefined>(undefined)

const translations = {
  en: {
    // Navigation
    "nav.import": "Data Import",
    "nav.papers": "Papers",
    "nav.authors": "Authors",

    // Import Page
    "import.title": "Data Import",
    "import.description": "Import Excel file containing paper submissions",
    "import.uploadTitle": "Upload Excel File",
    "import.uploadDescription": "Drag and drop your file here, or click to select",
    "import.selectFile": "Select File",
    "import.processing": "Processing...",
    "import.dragAndDrop": "or drag and drop file here",
    "import.processingFile": "Processing file",
    "import.success": "Import Successful!",
    "import.stats.papers": "papers imported",
    "import.stats.authors": "unique authors found",
    "import.stats.warnings": "quota violations detected",
    "import.redirecting": "Redirecting to papers page...",
    "import.existingData": "Data already loaded:",
    "import.papers": "papers",
    "import.authors": "authors",
    "import.viewPapers": "View Papers",
    "import.viewAuthors": "View Authors",
    "import.quickAccess": "Quick Access",
    "import.requirements.title": "File Requirements",
    "import.requirements.format": "Excel format (.xlsx or .xls)",
    "import.requirements.columns": "Must include Paper ID, Title, Author Names, Author Emails columns",
    "import.requirements.authors": "Authors separated by commas or semicolons",
    "import.quotaRules.title": "Quota Rules",
    "import.quotaRules.allowed": "Papers allowed per author",
    "import.quotaRules.warning": "Papers will be flagged as warning",
    "import.features.title": "Key Features",
    "import.features.paperList": "View all papers with warning indicators",
    "import.features.authorManagement": "Manage author statistics and quotas",
    "import.features.emailMapping": "Detect email/author conflicts",
    "import.features.manualCorrection": "Manual correction of author information",

    // Old navigation items
    "nav.brandVisibility": "Brand Visibility",
    "nav.productVisibility": "Product Visibility",
    "nav.citations": "AI Citations",
    "nav.sentiment": "Brand Sentiment",
    "nav.suggestions": "AI Suggestions",
    "nav.results": "Optimization Results",
    "nav.manage": "Brand Management",
    "nav.prRisk": "Brand PR Crisis Detection",

    // Common
    "common.platform": "Platform",
    "common.topic": "Topic",
    "common.timeRange": "Time Range",
    "common.allPlatforms": "All Platforms",
    "common.allTopics": "All Topics",
    "common.last7Days": "Last 7 Days",
    "common.last30Days": "Last 30 Days",
    "common.last90Days": "Last 90 Days",
    "common.search": "Search",
    "common.filter": "Filter",
    "common.export": "Export",
    "common.view": "View",
    "common.previousPage": "Previous",
    "common.nextPage": "Next",

    // Summary
    "summary.brandSummary": "Brand Summary",

    // Brand Visibility
    "visibility.title": "Brand Visibility",
    "visibility.description": "Real-time brand exposure tracking and mention frequency analysis across leading AI platforms",
    "visibility.industryRanking": "Industry Brand Visibility Ranking",
    "visibility.trendChart": "Brand Visibility",
    "visibility.rank": "Rank",
    "visibility.brand": "Brand",
    "visibility.score": "Score",
    "visibility.yourBrand": "Your Brand",

    // Metrics
    "metrics.aiMentions": "AI Mentions",
    "metrics.citations": "Citations",
    "metrics.visibilityRate": "Visibility Rate",
    "metrics.accuracy": "Accuracy Rate",
    "metrics.positiveSentiment": "Positive Sentiment",
    "metrics.negativeSentiment": "Negative Sentiment",
    "metrics.neutralSentiment": "Neutral Sentiment",

    // Products
    "products.title": "Product Visibility",
    "products.description": "Comprehensive product exposure monitoring and market impact assessment across AI platforms",

    // Citations
    "citations.title": "AI Citation Sources",
    "citations.description": "In-depth analysis of citation source distribution and content attribution tracking system",
    "citations.byPlatform": "Citations by Platform",
    "citations.recentCitations": "Recent Citations",
    "citations.citationCount": "Citation Count",
    "citations.totalCitations": "Total Citations",
    "citations.citedArticles": "Cited Articles",
    "citations.citationRate": "Citation Rate",
    "citations.participationComparison": "Website Participation Comparison",
    "citations.participation": "Participation",
    "citations.cited": "Cited",
    "citations.websiteRankings": "Website Rankings",
    "citations.rank": "Rank",
    "citations.websiteInfo": "Website",
    "citations.participationCount": "Participation",
    "citations.articles": "Articles",
    "citations.maxCitations": "Max Citations",
    "citations.maxCitedArticles": "Max Cited Articles",
    "citations.operation": "Operation",
    "citations.totalEntries": "Total {{count}} entries",

    // Sentiment
    "sentiment.title": "AI Brand Sentiment",
    "sentiment.description": "Real-time brand sentiment monitoring and public opinion risk intelligence analysis system",
    "sentiment.distribution": "Platform Sentiment Distribution",
    "sentiment.positive": "Positive",
    "sentiment.neutral": "Neutral",
    "sentiment.negative": "Negative",
    "sentiment.aiMentions": "AI Mentions",
    "sentiment.citedArticles": "Cited Articles",
    "sentiment.positiveRate": "Positive Rate",
    "sentiment.negativeArticles": "Negative Articles",
    "sentiment.platformSentiment": "Platform Sentiment Distribution",
    "sentiment.platform": "Platform",
    "sentiment.keywordCloud": "Sentiment Keywords",
    "sentiment.platformDetails": "Platform Details",

    // Management
    "manage.title": "Brand Management",
    "manage.description": "Centralized configuration hub for brand information, product portfolio, and competitive intelligence",

    // Optimization
    "optimize.title": "AI Optimization Suggestions",
    "optimize.description": "Data-driven AI visibility enhancement strategies and intelligent optimization roadmap recommendation system",

    "results.title": "Optimization Results",
    "results.description": "Comprehensive tracking and quantitative evaluation of optimization implementation impact monitoring system",

    // PR Risk Detection
    "prRisk.title": "Brand PR Crisis Detection",
    "prRisk.description":
      "Real-time monitoring and early warning system for brand reputation crises across AI platforms",
    "prRisk.riskScore": "Risk Score",
    "prRisk.activeAlerts": "Active Alerts",
    "prRisk.negativeArticles": "Negative Articles",
    "prRisk.sentimentDrop": "Sentiment Drop",
    "prRisk.riskLevel": "Risk Level",
    "prRisk.high": "High",
    "prRisk.medium": "Medium",
    "prRisk.low": "Low",
    "prRisk.critical": "Critical",
    "prRisk.activeRisks": "Active Risk Alerts",
    "prRisk.riskTrends": "Risk Trend Analysis",
    "prRisk.platformRisks": "Platform Risk Distribution",
    "prRisk.recentIncidents": "Recent Risk Incidents",
    "prRisk.date": "Date",
    "prRisk.platform": "Platform",
    "prRisk.issue": "Issue",
    "prRisk.severity": "Severity",
    "prRisk.status": "Status",
    "prRisk.action": "Action",
    "prRisk.viewDetails": "View Details",
    "prRisk.resolved": "Resolved",
    "prRisk.monitoring": "Monitoring",
    "prRisk.investigating": "Investigating",
    "prRisk.negativeSentimentSpike": "Negative Sentiment Spike",
    "prRisk.controversialTopic": "Controversial Topic Association",
    "prRisk.misinformation": "Potential Misinformation",
    "prRisk.competitorAttack": "Competitor Negative Campaign",
    "prRisk.serviceIssue": "Service Quality Complaints",

    // Products Page
    "products.searchPlaceholder": "Search products...",
    "products.category": "Category",
    "products.allCategories": "All Categories",
    "products.cloudStorage": "Cloud Storage",
    "products.dataSecurity": "Data Security",
    "products.collaboration": "Collaboration",
    "products.analytics": "Analytics",
    "products.sortBy": "Sort by",
    "products.visibilityScore": "Visibility Score",
    "products.mentions": "Mentions",
    "products.trending": "Trending",
    "products.totalProducts": "Total Products",
    "products.acrossCategories": "Across all categories",
    "products.avgVisibility": "Avg Visibility",
    "products.fromLastMonth": "from last month",
    "products.totalMentions": "Total Mentions",
    "products.totalCitations": "Total Citations",
    "products.topAIPlatforms": "Top AI Platforms",
    "products.viewDetails": "View Details",

    // Optimize Page
    "optimize.overallScore": "Overall Optimization Score",
    "optimize.currentLevel": "Your current AI visibility optimization level",
    "optimize.outOf": "out of 100",
    "optimize.potentialImprovement": "Potential improvement: +22 points",
    "optimize.viewActionPlan": "View Action Plan",
    "optimize.quickWins": "Quick Wins",
    "optimize.quickWinsDesc": "Easy improvements you can make right now",
    "optimize.recommendations": "Recommendations",
    "optimize.metrics": "Metrics",
    "optimize.byPlatform": "By Platform",
    "optimize.optimizationRecommendations": "Optimization Recommendations",
    "optimize.prioritizedActions": "Prioritized actions to improve your AI visibility",
    "optimize.filterByImpact": "Filter by Impact",
    "optimize.potentialGain": "potential gain",
    "optimize.impact": "impact",
    "optimize.effort": "effort",
    "optimize.startOptimization": "Start Optimization",
    "optimize.optimizationMetrics": "Optimization Metrics",
    "optimize.trackProgress": "Track your progress across key optimization areas",
    "optimize.target": "Target",
    "optimize.current": "Current",
    "optimize.pointsToTarget": "points to target",
    "optimize.platformOptimization": "Platform-Specific Optimization",
    "optimize.optimizePresence": "Optimize your presence on each AI platform",
    "optimize.pendingRecommendations": "Pending Recommendations",
    "optimize.optimize": "Optimize",
    "optimize.high": "high",
    "optimize.medium": "medium",
    "optimize.low": "low",
    "optimize.pending": "pending",
    "optimize.inProgress": "in-progress",
    "optimize.completed": "completed",
    "optimize.good": "good",
    "optimize.excellent": "excellent",
    "optimize.needsImprovement": "needs-improvement",

    // Results Page
    "results.visibilityIncrease": "Visibility Increase",
    "results.citationGrowth": "Citation Growth",
    "results.sentimentImprovement": "Sentiment Improvement",
    "results.optimizationActions": "Optimization Actions",
    "results.performanceTrends": "Performance Trends",
    "results.optimizationImpact": "Optimization Impact",
    "results.before": "Before",
    "results.after": "After",
    "results.platformImprovements": "Platform Improvements",
    "results.completed": "Completed",
    "results.inProgress": "In Progress",

    // Manage Page
    "manage.brandInfo": "Brand Info",
    "manage.keyMessages": "Key Messages",
    "manage.competitors": "Competitors",
    "manage.brandInformation": "Brand Information",
    "manage.updateBrandDetails": "Update your brand details and company information",
    "manage.saveChanges": "Save Changes",
    "manage.brandName": "Brand Name",
    "manage.website": "Website",
    "manage.industry": "Industry",
    "manage.founded": "Founded",
    "manage.tagline": "Tagline",
    "manage.brandDescription": "Brand Description",
    "manage.aiOptimizationSettings": "AI Optimization Settings",
    "manage.enableAIMonitoring": "Enable AI Monitoring",
    "manage.trackBrandMentions": "Track brand mentions across AI platforms",
    "manage.autoUpdateBrandInfo": "Auto-Update Brand Info",
    "manage.autoSyncChanges": "Automatically sync changes to AI platforms",
    "manage.sentimentAlerts": "Sentiment Alerts",
    "manage.getNotifiedNegative": "Get notified of negative sentiment changes",
    "manage.manageProducts": "Manage your product portfolio",
    "manage.addProduct": "Add Product",
    "manage.active": "active",
    "manage.inactive": "inactive",
    "manage.edit": "Edit",
    "manage.details": "Details",
    "manage.keyMessagesDesc": "Define how AI should describe your brand",
    "manage.addMessage": "Add Message",
    "manage.priority": "priority",
    "manage.addNewKeyMessage": "Add New Key Message",
    "manage.createNewMessage": "Create a new message to guide AI responses",
    "manage.messageTitle": "Message Title",
    "manage.messageContent": "Message Content",
    "manage.messageTitlePlaceholder": "e.g., Customer Focus",
    "manage.messageContentPlaceholder": "Describe the key message...",
    "manage.priorityPlaceholder": "high, medium, or low",
    "manage.competitorTracking": "Competitor Tracking",
    "manage.monitorCompetitors": "Monitor competitors in AI responses",
    "manage.addCompetitor": "Add Competitor",
    "manage.monitoring": "monitoring",
    "manage.compare": "Compare",
    "manage.trackNewCompetitor": "Track a new competitor in AI responses",
    "manage.competitorName": "Competitor Name",
    "manage.competitorNamePlaceholder": "e.g., CompetitorCo",
    "manage.competitorCategoryPlaceholder": "e.g., Cloud Storage",
  },
  zh: {
    // Navigation
    "nav.import": "数据导入",
    "nav.papers": "论文管理",
    "nav.authors": "作者管理",

    // Import Page
    "import.title": "数据导入",
    "import.description": "导入包含论文投稿信息的Excel文件",
    "import.uploadTitle": "上传Excel文件",
    "import.uploadDescription": "拖放文件到此处，或点击选择文件",
    "import.selectFile": "选择文件",
    "import.processing": "处理中...",
    "import.dragAndDrop": "或将文件拖放到此处",
    "import.processingFile": "正在处理文件",
    "import.success": "导入成功！",
    "import.stats.papers": "篇论文已导入",
    "import.stats.authors": "位不重复作者",
    "import.stats.warnings": "个配额违规",
    "import.redirecting": "正在跳转到论文页面...",
    "import.existingData": "已加载数据：",
    "import.papers": "篇论文",
    "import.authors": "位作者",
    "import.viewPapers": "查看论文",
    "import.viewAuthors": "查看作者",
    "import.quickAccess": "快速访问",
    "import.requirements.title": "文件要求",
    "import.requirements.format": "Excel格式（.xlsx 或 .xls）",
    "import.requirements.columns": "必须包含 Paper ID、Title、Author Names、Author Emails 列",
    "import.requirements.authors": "作者之间用逗号或分号分隔",
    "import.quotaRules.title": "配额规则",
    "import.quotaRules.allowed": "每位作者允许投稿数",
    "import.quotaRules.warning": "论文将被标记为警告",
    "import.features.title": "主要功能",
    "import.features.paperList": "查看所有论文并显示警告标记",
    "import.features.authorManagement": "管理作者统计和配额",
    "import.features.emailMapping": "检测邮箱/作者冲突",
    "import.features.manualCorrection": "人工修正作者信息",

    "nav.brandVisibility": "品牌可见性",
    "nav.productVisibility": "产品可见性",
    "nav.citations": "AI引用来源",
    "nav.sentiment": "AI品牌情感",
    "nav.suggestions": "AI优化建议",
    "nav.results": "AI优化效果",
    "nav.manage": "品牌配置管理",
    "nav.prRisk": "品牌公关危机预警",

    // Common
    "common.platform": "平台",
    "common.topic": "主题",
    "common.timeRange": "时间范围",
    "common.allPlatforms": "全部平台",
    "common.allTopics": "全部主题",
    "common.last7Days": "最近7天",
    "common.last30Days": "最近30天",
    "common.last90Days": "最近90天",
    "common.search": "搜索",
    "common.filter": "筛选",
    "common.export": "导出",
    "common.view": "查看",
    "common.previousPage": "上一页",
    "common.nextPage": "下一页",

    // Summary
    "summary.brandSummary": "品牌总结",

    // Brand Visibility
    "visibility.title": "品牌可见性",
    "visibility.description": "实时追踪品牌在主流AI平台的曝光度和提及频率分析系统",
    "visibility.industryRanking": "行业品牌可见性排名",
    "visibility.trendChart": "品牌可见性",
    "visibility.rank": "排名",
    "visibility.brand": "品牌",
    "visibility.score": "得分",
    "visibility.yourBrand": "某品牌",

    // Metrics
    "metrics.aiMentions": "AI引用次数",
    "metrics.citations": "引用文章数",
    "metrics.visibilityRate": "可见性指数",
    "metrics.accuracy": "正面情感率",
    "metrics.positiveSentiment": "正面",
    "metrics.negativeSentiment": "负面",
    "metrics.neutralSentiment": "中性",

    // Products
    "products.title": "产品可见性",
    "products.description": "全面监控产品在AI平台的曝光表现和市场影响力评估系统",

    // Citations
    "citations.title": "AI引用来源",
    "citations.description": "深度分析AI平台引用来源分布和内容归属追踪系统",
    "citations.byPlatform": "网站参与引用对比",
    "citations.recentCitations": "热门文章",
    "citations.citationCount": "引用计数",
    "citations.totalCitations": "总引用数",
    "citations.citedArticles": "被引文章",
    "citations.citationRate": "引用率",
    "citations.participationComparison": "网站参与引用对比",
    "citations.participation": "参与度",
    "citations.cited": "被引用",
    "citations.websiteRankings": "网站排名",
    "citations.rank": "排名",
    "citations.websiteInfo": "网站信息",
    "citations.participationCount": "参与度",
    "citations.articles": "文章数",
    "citations.maxCitations": "最高引用数",
    "citations.maxCitedArticles": "最高被引文章数",
    "citations.operation": "操作",
    "citations.totalEntries": "共 {{count}} 条",

    // Sentiment
    "sentiment.title": "AI品牌情感",
    "sentiment.description": "实时监测品牌在AI平台的情感倾向和舆情风险智能分析系统",
    "sentiment.distribution": "各平台情感分布对比",
    "sentiment.positive": "正面",
    "sentiment.neutral": "中性",
    "sentiment.negative": "负面",
    "sentiment.aiMentions": "AI提及次数",
    "sentiment.citedArticles": "引用文章数",
    "sentiment.positiveRate": "正面情感率",
    "sentiment.negativeArticles": "负面文章数",
    "sentiment.platformSentiment": "各平台情感分布对比",
    "sentiment.platform": "平台",
    "sentiment.keywordCloud": "情感关键词",
    "sentiment.platformDetails": "平台详情",

    // Management
    "manage.title": "品牌配置管理",
    "manage.description": "集中管理品牌信息、产品组合和竞品情报的统一配置中心",

    // Optimization
    "optimize.title": "AI优化建议",
    "optimize.description": "基于数据分析的AI可见度提升策略和优化路径智能推荐系统",

    "results.title": "AI优化效果",
    "results.description": "全方位追踪和量化评估优化措施的实施效果监测系统",

    // PR Risk Detection
    "prRisk.title": "品牌公关危机预警",
    "prRisk.description": "实时监控AI平台上的品牌声誉危机和突发公关事件预警系统",
    "prRisk.riskScore": "风险评分",
    "prRisk.activeAlerts": "活跃警报",
    "prRisk.negativeArticles": "负面文章",
    "prRisk.sentimentDrop": "情感下降",
    "prRisk.riskLevel": "风险等级",
    "prRisk.high": "高",
    "prRisk.medium": "中",
    "prRisk.low": "低",
    "prRisk.critical": "严重",
    "prRisk.activeRisks": "活跃风险警报",
    "prRisk.riskTrends": "风险趋势分析",
    "prRisk.platformRisks": "平台风险分布",
    "prRisk.recentIncidents": "近期风险事件",
    "prRisk.date": "日期",
    "prRisk.platform": "平台",
    "prRisk.issue": "问题",
    "prRisk.severity": "严重程度",
    "prRisk.status": "状态",
    "prRisk.action": "操作",
    "prRisk.viewDetails": "查看详情",
    "prRisk.resolved": "已解决",
    "prRisk.monitoring": "监控中",
    "prRisk.investigating": "调查中",
    "prRisk.negativeSentimentSpike": "负面情感激增",
    "prRisk.controversialTopic": "争议话题关联",
    "prRisk.misinformation": "潜在错误信息",
    "prRisk.competitorAttack": "竞争对手负面宣传",
    "prRisk.serviceIssue": "服务质量投诉",

    // Products Page
    "products.searchPlaceholder": "搜索产品...",
    "products.category": "类别",
    "products.allCategories": "所有类别",
    "products.cloudStorage": "云存储",
    "products.dataSecurity": "数据安全",
    "products.collaboration": "协作",
    "products.analytics": "分析",
    "products.sortBy": "排序",
    "products.visibilityScore": "可见性评分",
    "products.mentions": "提及次数",
    "products.trending": "趋势",
    "products.totalProducts": "总产品数",
    "products.acrossCategories": "跨所有类别",
    "products.avgVisibility": "平均可见性",
    "products.fromLastMonth": "较上月",
    "products.totalMentions": "总提及次数",
    "products.totalCitations": "总引用次数",
    "products.topAIPlatforms": "主要AI平台",
    "products.viewDetails": "查看详情",

    // Optimize Page
    "optimize.overallScore": "整体优化评分",
    "optimize.currentLevel": "您当前的AI可见性优化水平",
    "optimize.outOf": "满分100",
    "optimize.potentialImprovement": "潜在提升：+22分",
    "optimize.viewActionPlan": "查看行动计划",
    "optimize.quickWins": "快速优化",
    "optimize.quickWinsDesc": "您现在就可以进行的简单改进",
    "optimize.recommendations": "建议",
    "optimize.metrics": "指标",
    "optimize.byPlatform": "按平台",
    "optimize.optimizationRecommendations": "优化建议",
    "optimize.prioritizedActions": "优先行动以提升您的AI可见性",
    "optimize.filterByImpact": "按影响筛选",
    "optimize.potentialGain": "潜在收益",
    "optimize.impact": "影响",
    "optimize.effort": "工作量",
    "optimize.startOptimization": "开始优化",
    "optimize.optimizationMetrics": "优化指标",
    "optimize.trackProgress": "跟踪您在关键优化领域的进展",
    "optimize.target": "目标",
    "optimize.current": "当前",
    "optimize.pointsToTarget": "距目标",
    "optimize.platformOptimization": "平台专项优化",
    "optimize.optimizePresence": "优化您在每个AI平台上的表现",
    "optimize.pendingRecommendations": "待处理建议",
    "optimize.optimize": "优化",
    "optimize.high": "高",
    "optimize.medium": "中",
    "optimize.low": "低",
    "optimize.pending": "待处理",
    "optimize.inProgress": "进行中",
    "optimize.completed": "已完成",
    "optimize.good": "良好",
    "optimize.excellent": "优秀",
    "optimize.needsImprovement": "需要改进",

    // Results Page
    "results.visibilityIncrease": "可见性提升",
    "results.citationGrowth": "引用增长",
    "results.sentimentImprovement": "情感改善",
    "results.optimizationActions": "优化措施",
    "results.performanceTrends": "整体表现趋势",
    "results.optimizationImpact": "优化措施影响",
    "results.before": "优化前",
    "results.after": "优化后",
    "results.platformImprovements": "各平台提升情况",
    "results.completed": "已完成",
    "results.inProgress": "进行中",

    // Manage Page
    "manage.brandInfo": "品牌信息",
    "manage.keyMessages": "关键信息",
    "manage.competitors": "竞品",
    "manage.brandInformation": "品牌信息",
    "manage.updateBrandDetails": "更新您的品牌详情和公司信息",
    "manage.saveChanges": "保存更改",
    "manage.brandName": "品牌名称",
    "manage.website": "网站",
    "manage.industry": "行业",
    "manage.founded": "成立时间",
    "manage.tagline": "标语",
    "manage.brandDescription": "品牌描述",
    "manage.aiOptimizationSettings": "AI优化设置",
    "manage.enableAIMonitoring": "启用AI监控",
    "manage.trackBrandMentions": "跟踪AI平台上的品牌提及",
    "manage.autoUpdateBrandInfo": "自动更新品牌信息",
    "manage.autoSyncChanges": "自动同步更改到AI平台",
    "manage.sentimentAlerts": "情感警报",
    "manage.getNotifiedNegative": "获取负面情感变化通知",
    "manage.manageProducts": "管理您的产品组合",
    "manage.addProduct": "添加产品",
    "manage.active": "活跃",
    "manage.inactive": "非活跃",
    "manage.edit": "编辑",
    "manage.details": "详情",
    "manage.keyMessagesDesc": "定义AI应如何描述您的品牌",
    "manage.addMessage": "添加信息",
    "manage.priority": "优先级",
    "manage.addNewKeyMessage": "添加新的关键信息",
    "manage.createNewMessage": "创建新信息以指导AI回复",
    "manage.messageTitle": "信息标题",
    "manage.messageContent": "信息内容",
    "manage.messageTitlePlaceholder": "例如：客户至上",
    "manage.messageContentPlaceholder": "描述关键信息...",
    "manage.priorityPlaceholder": "高、中或低",
    "manage.competitorTracking": "竞品跟踪",
    "manage.monitorCompetitors": "监控AI回复中的竞品",
    "manage.addCompetitor": "添加竞品",
    "manage.monitoring": "监控中",
    "manage.compare": "对比",
    "manage.trackNewCompetitor": "跟踪AI回复中的新竞品",
    "manage.competitorName": "竞品名称",
    "manage.competitorNamePlaceholder": "例如：竞品公司",
    "manage.competitorCategoryPlaceholder": "例如：云存储",
  },
}

export function I18nProvider({ children }: { children: ReactNode }) {
  const [locale, setLocaleState] = useState<Locale>("en")
  const [isInitialized, setIsInitialized] = useState(false)

  // Load saved language preference on mount
  useEffect(() => {
    const savedLocale = localStorage.getItem("VLDB-Toolkits-locale") as Locale | null
    if (savedLocale && (savedLocale === "en" || savedLocale === "zh")) {
      setLocaleState(savedLocale)
    }
    setIsInitialized(true)
  }, [])

  // Save language preference when it changes
  const setLocale = (newLocale: Locale) => {
    setLocaleState(newLocale)
    localStorage.setItem("VLDB-Toolkits-locale", newLocale)
  }

  const t = (key: string): string => {
    return translations[locale][key as keyof typeof translations.en] || key
  }

  // Don't render until initialized to prevent flash of wrong language
  if (!isInitialized) {
    return null
  }

  return <I18nContext.Provider value={{ locale, setLocale, t }}>{children}</I18nContext.Provider>
}

export function useI18n() {
  const context = useContext(I18nContext)
  if (!context) {
    throw new Error("useI18n must be used within I18nProvider")
  }
  return context
}
